(function(q){"object"===typeof exports&&"undefined"!==typeof module?module.exports=q():"function"===typeof define&&define.amd?define([],q):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).rfc6902=q()})(function(){return function m(n,d,k){function l(a,b){if(!d[a]){if(!n[a]){var c="function"==typeof require&&require;if(!b&&c)return c(a,!0);if(g)return g(a,!0);c=Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c;}c=d[a]={exports:{}};
n[a][0].call(c.exports,function(c){var b=n[a][1][c];return l(b?b:c)},c,c.exports,m,n,d,k)}return d[a].exports}for(var g="function"==typeof require&&require,h=0;h<k.length;h++)l(k[h]);return l}({1:[function(m,n,d){function k(a,c){var b={},e;for(e in a)b[e]=1;for(var f in c)delete b[f];return Object.keys(b)}function l(a){var c={};a.forEach(function(a){for(var b in a)c[b]=(c[b]||0)+1});a=a.length;for(var b in c)c[b]<a&&delete c[b];return Object.keys(c)}function g(a){return void 0===a?"undefined":null===
a?"null":Array.isArray(a)?"array":typeof a}function h(a,d,h){function g(c,b){var e=k[c+","+b];if(void 0===e){if(f(a[c-1],d[b-1]))e=g(c-1,b-1);else{e=[];if(0<c){var h=g(c-1,b);e.push({operations:h.operations.concat({op:"remove",index:c-1}),cost:h.cost+1})}0<b&&(h=g(c,b-1),e.push({operations:h.operations.concat({op:"add",index:c-1,value:d[b-1]}),cost:h.cost+1}));0<c&&0<b&&(h=g(c-1,b-1),e.push({operations:h.operations.concat({op:"replace",index:c-1,original:a[c-1],value:d[b-1]}),cost:h.cost+1}));e=e.sort(function(a,
c){return a.cost-c.cost})[0]}k[c+","+b]=e}return e}var k={"0,0":{operations:[],cost:0}},l=isNaN(a.length)||0>=a.length?0:a.length,m=isNaN(d.length)||0>=d.length?0:d.length,m=g(l,m).operations.reduce(function(a,f){var d=c(a,2),g=d[0],d=d[1];if("add"===f.op){var p=f.index+1+d,p={op:f.op,path:h.add(p<l?String(p):"-").toString(),value:f.value};return[g.concat(p),d+1]}if("remove"===f.op)return p={op:f.op,path:h.add(String(f.index+d)).toString()},[g.concat(p),d-1];p=h.add(String(f.index+d));p=b(f.original,
f.value,p);return[g.concat.apply(g,e(p)),d]},[[],0]);return c(m,2)[0]}function a(a,c,f){var d=[];k(a,c).forEach(function(a){d.push({op:"remove",path:f.add(a).toString()})});k(c,a).forEach(function(a){d.push({op:"add",path:f.add(a).toString(),value:c[a]})});l([a,c]).forEach(function(h){d.push.apply(d,e(b(a[h],c[h],f.add(h))))});return d}function b(c,b,e){var d=g(c),k=g(b);if("array"==d&&"array"==k)return h(c,b,e);if("object"==d&&"object"==k)return a(c,b,e);c=f(c,b)?[]:[{op:"replace",path:e.toString(),
value:b}];return c}var c=function(a,c){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){for(var b=[],e=a[Symbol.iterator](),f;!(f=e.next()).done&&(b.push(f.value),!c||b.length!==c););return b}throw new TypeError("Invalid attempt to destructure non-iterable instance");},e=function(a){if(Array.isArray(a)){for(var c=0,b=Array(a.length);c<a.length;c++)b[c]=a[c];return b}return Array.from(a)};d.diffAny=b;Object.defineProperty(d,"__esModule",{value:!0});var f=m("./equal").compare},{"./equal":2}],
2:[function(m,n,d){function k(a,b){for(var c=[],e=0,f=a.length;e<f;e++)c.push([a[e],b[e]]);return c}function l(a,b){return a.length!==b.length?!1:k(a,b).every(function(a){return h(a[0],a[1])})}function g(a,b){var c=Object.keys(a),e=Object.keys(b);return l(c,e)?c.every(function(c){return h(a[c],b[c])}):!1}function h(a,b){return a===b?!0:Array.isArray(a)&&Array.isArray(b)?l(a,b):Object(a)===a&&Object(b)===b?g(a,b):!1}d.compare=h;Object.defineProperty(d,"__esModule",{value:!0})},{}],3:[function(m,n,
d){var k=function a(b,c,e){var f=Object.getOwnPropertyDescriptor(b,c);if(void 0===f)return b=Object.getPrototypeOf(b),null===b?void 0:a(b,c,e);if("value"in f&&f.writable)return f.value;c=f.get;return void 0===c?void 0:c.call(e)},l=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(a.__proto__=b)},g=function(a,
b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");};Object.defineProperty(d,"__esModule",{value:!0});d.MissingError=function(a){function b(a){g(this,b);k(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,"Value required at path: "+a);this.path=a;this.name=this.constructor.name}l(b,a);return b}(Error);d.InvalidOperationError=function(a){function b(a){g(this,b);k(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,"Invalid operation: "+a);this.op=
a;this.name=this.constructor.name}l(b,a);return b}(Error);d.TestError=function(a){function b(a,e){g(this,b);k(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,"Test failed: "+a+" != "+e);this.actual=a;this.expected=e;this.name=this.constructor.name;this.actual=a;this.expected=e}l(b,a);return b}(Error)},{}],4:[function(m,n,d){d.applyPatch=function(a,b){return b.map(function(c){var b=g[c.op];return void 0===b?new k(c.op):b(a,c)})};d.createPatch=function(a,b){var c=new l;return h(a,b,
c)};Object.defineProperty(d,"__esModule",{value:!0});var k=m("./errors").InvalidOperationError,l=m("./pointer").Pointer,g=function(a){return a&&a.__esModule?a:{"default":a}}(m("./patch")),h=m("./diff").diffAny},{"./diff":1,"./errors":3,"./patch":5,"./pointer":6}],5:[function(m,n,d){function k(a,b,f){Array.isArray(a)?"-"==b?a.push(f):a.splice(b,0,f):a[b]=f}function l(a,b){Array.isArray(a)?a.splice(b,1):delete a[b]}d.add=function(b,e){var f=g.fromJSON(e.path).evaluate(b);if(void 0===f.parent)return new a(e.path);
k(f.parent,f.key,e.value);return null};d.remove=function(b,e){var f=g.fromJSON(e.path).evaluate(b);if(void 0===f.value)return new a(e.path);l(f.parent,f.key);return null};d.replace=function(b,e){var f=g.fromJSON(e.path).evaluate(b);if(void 0===f.value)return new a(e.path);f.parent[f.key]=e.value;return null};d.move=function(b,e){var f=g.fromJSON(e.from).evaluate(b);if(void 0===f.value)return new a(e.from);var d=g.fromJSON(e.path).evaluate(b);if(void 0===d.parent)return new a(e.path);l(f.parent,f.key);
k(d.parent,d.key,f.value);return null};d.copy=function(b,e){var f=g.fromJSON(e.from).evaluate(b);if(void 0===f.value)return new a(e.from);var d=g.fromJSON(e.path).evaluate(b);if(void 0===d.parent)return new a(e.path);l(f.parent,f.key);k(d.parent,d.key,f.value);return null};d.test=function(a,e){var d=g.fromJSON(e.path).evaluate(a);return h(d.value,e.value)?null:new b(d.value,e.value)};Object.defineProperty(d,"__esModule",{value:!0});var g=m("./pointer").Pointer,h=m("./equal").compare;m=m("./errors");
var a=m.MissingError,b=m.TestError},{"./equal":2,"./errors":3,"./pointer":6}],6:[function(m,n,d){function k(d){return d.replace(/~1/g,"/").replace(/~0/g,"~")}function l(d){return d.replace(/~/g,"~0").replace(/\//g,"~1")}var g=function(){function d(a,b){for(var c in b){var e=b[c];e.configurable=!0;e.value&&(e.writable=!0)}Object.defineProperties(a,b)}return function(a,b,c){b&&d(a.prototype,b);c&&d(a,c);return a}}();Object.defineProperty(d,"__esModule",{value:!0});d.Pointer=function(){function d(a){a=
void 0===a?[""]:a;if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.tokens=a}g(d,{toString:{value:function(){return this.tokens.map(l).join("/")}},evaluate:{value:function(a){for(var b=null,c=null,d=1,f=this.tokens.length;d<f;d++)b=a,c=this.tokens[d],a=(b||{})[c];return{parent:b,key:c,value:a}}},push:{value:function(a){this.tokens.push(a)}},add:{value:function(a){a=this.tokens.concat(String(a));return new d(a)}}},{fromJSON:{value:function(a){var b=a.split("/").map(k);
if(""!==b[0])throw Error("Invalid JSON Pointer: "+a);return new d(b)}}});return d}()},{}]},{},[4])(4)});
