(function(m){"object"===typeof exports&&"undefined"!==typeof module?module.exports=m():"function"===typeof define&&define.amd?define([],m):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).rfc6902=m()})(function(){return function f(l,c,g){function k(b,e){if(!c[b]){if(!l[b]){var a="function"==typeof require&&require;if(!e&&a)return a(b,!0);if(h)return h(b,!0);a=Error("Cannot find module '"+b+"'");throw a.code="MODULE_NOT_FOUND",a;}a=c[b]={exports:{}};
l[b][0].call(a.exports,function(a){var e=l[b][1][a];return k(e?e:a)},a,a.exports,f,l,c,g)}return c[b].exports}for(var h="function"==typeof require&&require,d=0;d<g.length;d++)k(g[d]);return k}({1:[function(f,l,c){function g(a,b){var e={},d;for(d in a)e[d]=1;for(var h in b)delete e[h];return Object.keys(e)}function k(a){var b={};a.forEach(function(a){for(var e in a)b[e]=(b[e]||0)+1});a=a.length;for(var e in b)b[e]<a&&delete b[e];return Object.keys(b)}function h(a){return void 0===a?"undefined":null===
a?"null":Array.isArray(a)?"array":typeof a}function d(b,e,d){function h(d,c){var g=f[d+","+c];if(void 0===g){if(a.compare(b[d-1],e[c-1]))g=h(d-1,c-1);else{g=[];if(0<d){var k=h(d-1,c);g.push({operations:k.operations.concat({op:"remove",index:d-1}),cost:k.cost+1})}0<c&&(k=h(d,c-1),g.push({operations:k.operations.concat({op:"add",index:d-1,value:e[c-1]}),cost:k.cost+1}));0<d&&0<c&&(k=h(d-1,c-1),g.push({operations:k.operations.concat({op:"replace",index:d-1,value:e[c-1]}),cost:k.cost+1}));g=g.sort(function(a,
b){return a.cost-b.cost})[0]}f[d+","+c]=g}return g}var f={"0,0":{operations:[],cost:0}},c=0;return h(b.length,e.length).operations.map(function(a){if("add"===a.op){var e=a.index+1+c;a={op:a.op,path:d.add(e<b.length?String(e):"-").toString(),value:a.value};c++;return a}return"remove"===a.op?(a={op:a.op,path:d.add(String(a.index+c)).toString()},c--,a):{op:a.op,path:d.add(String(a.index+c)).toString(),value:a.value}})}function b(a,b,d){var c=[];g(a,b).forEach(function(a){c.push({op:"remove",path:d.add(a).toString()})});
g(b,a).forEach(function(a){c.push({op:"add",path:d.add(a).toString(),value:b[a]})});k([a,b]).forEach(function(h){h=e(a[h],b[h],d.add(h));Array.prototype.push.apply(c,h)});return c}function e(e,c,f){var g=h(e),k=h(c);if("array"==g&&"array"==k)return d(e,c,f);if("object"==g&&"object"==k)return b(e,c,f);g=[];a.compare(e,c)||g.push({op:"replace",path:f.toString(),value:c});return g}var a=f("./equal");c.diffAny=e},{"./equal":2}],2:[function(f,l,c){function g(b,e){for(var a=[],d=0,c=b.length;d<c;d++)a.push([b[d],
e[d]]);return a}function k(b,e){return b.length!==e.length?!1:g(b,e).every(function(a){return d(a[0],a[1])})}function h(b,e){var a=Object.keys(b),c=Object.keys(e);return k(a,c)?a.every(function(a){return d(b[a],e[a])}):!1}function d(b,e){return b===e?!0:Array.isArray(b)&&Array.isArray(e)?k(b,e):Object(b)===b&&Object(e)===e?h(b,e):!1}c.compare=d},{}],3:[function(f,l,c){function g(d,b){if(!(d instanceof b))throw new TypeError("Cannot call a class as a function");}function k(d,b){if("function"!==typeof b&&
null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);d.prototype=Object.create(b&&b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(d,b):d.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(d,b,e){var a=!0;for(;a;)if(null===d&&(d=Function.prototype),a=Object.getOwnPropertyDescriptor(d,b),void 0===a){d=Object.getPrototypeOf(d);if(null===d)break;a=!0}else{if("value"in
a)return a.value;b=a.get;return void 0===b?void 0:b.call(e)}};f=function(d){function b(e){g(this,b);h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,"Value required at path: "+e);this.name=this.constructor.name;this.path=e}k(b,d);return b}(Error);c.MissingError=f;f=function(d){function b(e){g(this,b);h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,"Invalid operation: "+e);this.name=this.constructor.name;this.op=e}k(b,d);return b}(Error);c.InvalidOperationError=
f;f=function(d){function b(e,a){g(this,b);h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,"Test failed: "+e+" != "+a);this.name=this.constructor.name;this.actual=e;this.expected=a}k(b,d);return b}(Error);c.TestError=f},{}],4:[function(f,l,c){function g(a,e){return e.map(function(e){var d=b.operationFunctions[e.op];return void 0===d?new h.InvalidOperationError(e.op):d(a,e)})}function k(a,b){var c=new d.Pointer,c=(0,e.diffAny)(a,b,c);c.forEach(function(a){a.path=a.path.toString()});
return c}Object.defineProperty(c,"__esModule",{value:!0});c.applyPatch=g;c.patch=function(a,b){console.error("rfc6902.patch(object, patch) has been deprecated. Use rfc6902.applyPatch(object, patch) instead.");return g(a,b)};c.createPatch=k;c.diff=function(a,b){console.error("rfc6902.diff(input, output) has been deprecated. Use rfc6902.createPatch(input, output) instead.");return k(a,b)};var h=f("./errors"),d=f("./pointer"),b=f("./patch"),e=f("./diff");f=f("./package");c.version=(f&&f.__esModule?f:
{"default":f})["default"].version},{"./diff":1,"./errors":3,"./package":5,"./patch":6,"./pointer":7}],5:[function(f,l,c){l.exports={name:"rfc6902",version:"1.0.5",description:"Complete implementation of RFC6902 (patch and diff)",keywords:["json","patch","diff","rfc6902"],homepage:"https://github.com/chbrown/rfc6902",repository:"git://github.com/chbrown/rfc6902.git",author:"Christopher Brown <io@henrian.com> (http://henrian.com)",license:"MIT",main:"./rfc6902.js",dependencies:{},devDependencies:{babel:"*",
babelify:"*",browserify:"*",derequire:"*","js-yaml":"*",mocha:"*",typescript:"*"},scripts:{test:"make test"}}},{}],6:[function(f,l,c){function g(b,a,d){Array.isArray(b)?"-"==a?b.push(d):b.splice(a,0,d):b[a]=d}function k(b,a){Array.isArray(b)?b.splice(a,1):delete b[a]}Object.defineProperty(c,"__esModule",{value:!0});var h=f("./pointer"),d=f("./equal"),b=f("./errors");c.operationFunctions={add:function(d,a){var c=h.Pointer.fromJSON(a.path).evaluate(d);if(void 0===c.parent)return new b.MissingError(a.path);
g(c.parent,c.key,a.value);return null},remove:function(d,a){var c=h.Pointer.fromJSON(a.path).evaluate(d);if(void 0===c.value)return new b.MissingError(a.path);k(c.parent,c.key);return null},replace:function(d,a){var c=h.Pointer.fromJSON(a.path).evaluate(d);if(void 0===c.value)return new b.MissingError(a.path);c.parent[c.key]=a.value;return null},move:function(d,a){var c=h.Pointer.fromJSON(a.from).evaluate(d);if(void 0===c.value)return new b.MissingError(a.from);var f=h.Pointer.fromJSON(a.path).evaluate(d);
if(void 0===f.parent)return new b.MissingError(a.path);k(c.parent,c.key);g(f.parent,f.key,c.value);return null},copy:function(d,a){var c=h.Pointer.fromJSON(a.from).evaluate(d);if(void 0===c.value)return new b.MissingError(a.from);var f=h.Pointer.fromJSON(a.path).evaluate(d);if(void 0===f.parent)return new b.MissingError(a.path);k(c.parent,c.key);g(f.parent,f.key,c.value);return null},test:function(c,a){var f=h.Pointer.fromJSON(a.path).evaluate(c);return(0,d.compare)(f.value,a.value)?null:new b.TestError(f.value,
a.value)}}},{"./equal":2,"./errors":3,"./pointer":7}],7:[function(f,l,c){function g(c){return c.replace(/~1/g,"/").replace(/~0/g,"~")}function k(c){return c.replace(/~/g,"~0").replace(/\//g,"~1")}f=function(){function c(d){void 0===d&&(d=[""]);this.tokens=d}c.fromJSON=function(d){var b=d.split("/").map(g);if(""!==b[0])throw Error("Invalid JSON Pointer: "+d);return new c(b)};c.prototype.toString=function(){return this.tokens.map(k).join("/")};c.prototype.evaluate=function(c){for(var b=null,e=null,
a=1,f=this.tokens.length;a<f;a++)b=c,e=this.tokens[a],c=(b||{})[e];return{parent:b,key:e,value:c}};c.prototype.push=function(c){this.tokens.push(c)};c.prototype.add=function(d){d=this.tokens.concat(String(d));return new c(d)};return c}();c.Pointer=f},{}]},{},[4])(4)});
