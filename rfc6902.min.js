(function(p){"object"===typeof exports&&"undefined"!==typeof module?module.exports=p():"function"===typeof define&&define.amd?define([],p):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).rfc6902=p()})(function(){return function e(l,h,g){function f(a,d){if(!h[a]){if(!l[a]){var b="function"==typeof require&&require;if(!d&&b)return b(a,!0);if(k)return k(a,!0);b=Error("Cannot find module '"+a+"'");throw b.code="MODULE_NOT_FOUND",b;}b=h[a]={exports:{}};
l[a][0].call(b.exports,function(m){var b=l[a][1][m];return f(b?b:m)},b,b.exports,e,l,h,g)}return h[a].exports}for(var k="function"==typeof require&&require,c=0;c<g.length;c++)f(g[c]);return f}({1:[function(e,l,h){function g(a,b){var d={},c;for(c in a)d[c]=1;for(var e in b)delete d[e];return Object.keys(d)}function f(a){var b={};a.forEach(function(a){for(var m in a)b[m]=(b[m]||0)+1});a=a.length;for(var d in b)b[d]<a&&delete b[d];return Object.keys(b)}function k(a){return void 0===a?"undefined":null===
a?"null":Array.isArray(a)?"array":typeof a}function c(a,d,c){function e(k,g){var f=h[[k,g]];if(void 0===f){if((0,b.compare)(a[k-1],d[g-1]))f=e(k-1,g-1);else{f=[];0<k&&f.push({dist:e(k-1,g),type:"deletion"});0<g&&f.push({dist:e(k,g-1),type:"insertion"});0<k&&0<g&&f.push({dist:e(k-1,g-1),type:"substitution"});var f=f.sort(function(a,b){return a.dist.cost-b.dist.cost})[0],l=[];if("deletion"===f.type)l.push({op:"remove",path:c.add(k-1).toString()});else if("insertion"===f.type){var n=g-1,n=c.add(n<a.length?
n:"-");l.push({op:"add",path:n.toString(),value:d[g-1]})}else l.push({op:"replace",path:c.add(g-1).toString(),value:d[g-1]});f={operations:f.dist.operations.concat(l),cost:f.dist.cost+1}}h[[k,g]]=f}return f}var h={"0,0":{operations:[],cost:0}};return e(a.length,d.length).operations.reverse()}function a(a,b,c){var e=[];g(a,b).forEach(function(a){e.push({op:"remove",path:c.add(a).toString()})});g(b,a).forEach(function(a){e.push({op:"add",path:c.add(a).toString(),value:b[a]})});f([a,b]).forEach(function(f){f=
d(a[f],b[f],c.add(f));Array.prototype.push.apply(e,f)});return e}function d(d,e,f){var g=k(d),h=k(e);if("array"==g&&"array"==h)return c(d,e,f);if("object"==g&&"object"==h)return a(d,e,f);g=[];(0,b.compare)(d,e)||g.push({op:"replace",path:f.toString(),value:e});return g}Object.defineProperty(h,"__esModule",{value:!0});h.diffAny=d;var b=e("./equal")},{"./equal":2}],2:[function(e,l,h){function g(a,d){for(var b=[],m=0,c=Math.min(a.length,d.length);m<c;m++)b.push([a[m],d[m]]);return b}function f(a,d){return a.length!==
d.length?!1:g(a,d).every(function(a){return c(a[0],a[1])})}function k(a,d){var b=Object.keys(a),m=Object.keys(d);return f(b,m)?b.every(function(b){return c(a[b],d[b])}):!1}function c(a,d){return a===d?!0:Array.isArray(a)&&Array.isArray(d)?f(a,d):Object(a)===a&&Object(d)===d?k(a,d):!1}Object.defineProperty(h,"__esModule",{value:!0});h.compare=c},{}],3:[function(e,l,h){function g(c,a){if(!(c instanceof a))throw new TypeError("Cannot call a class as a function");}function f(c,a){if("function"!==typeof a&&
null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}Object.defineProperty(h,"__esModule",{value:!0});var k=function(c,a,d){var b=!0;for(;b;)if(null===c&&(c=Function.prototype),b=Object.getOwnPropertyDescriptor(c,a),void 0===b){c=Object.getPrototypeOf(c);if(null===c)break;b=!0}else{if("value"in
b)return b.value;a=b.get;return void 0===a?void 0:a.call(d)}};e=function(c){function a(d){g(this,a);k(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,"Value required at path: "+d);this.name=this.constructor.name;this.path=d}f(a,c);return a}(Error);h.MissingError=e;e=function(c){function a(d){g(this,a);k(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,"Invalid operation: "+d);this.name=this.constructor.name;this.op=d}f(a,c);return a}(Error);h.InvalidOperationError=
e;e=function(c){function a(d,b){g(this,a);k(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,"Test failed: "+d+" != "+b);this.name=this.constructor.name;this.actual=d;this.expected=b}f(a,c);return a}(Error);h.TestError=e},{}],4:[function(e,l,h){function g(b,d){return d.map(function(d){var m=a.operationFunctions[d.op];return void 0===m?new k.InvalidOperationError(d.op):m(b,d)})}function f(a,m){var e=new c.Pointer,e=(0,d.diffAny)(a,m,e);e.forEach(function(a){a.path=a.path.toString()});
return e}Object.defineProperty(h,"__esModule",{value:!0});h.applyPatch=g;h.patch=function(a,d){console.error("rfc6902.patch(object, patch) has been deprecated. Use rfc6902.applyPatch(object, patch) instead.");return g(a,d)};h.createPatch=f;h.diff=function(a,d){console.error("rfc6902.diff(input, output) has been deprecated. Use rfc6902.createPatch(input, output) instead.");return f(a,d)};var k=e("./errors"),c=e("./pointer"),a=e("./patch"),d=e("./diff");e=e("./package");h.version=(e&&e.__esModule?e:
{"default":e})["default"].version},{"./diff":1,"./errors":3,"./package":5,"./patch":6,"./pointer":7}],5:[function(e,l,h){l.exports={name:"rfc6902",version:"1.0.4",description:"Complete implementation of RFC6902 (patch and diff)",keywords:["json","patch","diff","rfc6902"],homepage:"https://github.com/chbrown/rfc6902",repository:"git://github.com/chbrown/rfc6902.git",author:"Christopher Brown <io@henrian.com> (http://henrian.com)",license:"MIT",main:"./rfc6902.js",dependencies:{},devDependencies:{babel:"*",
babelify:"*",browserify:"*",derequire:"*","js-yaml":"*",mocha:"*"},scripts:{test:"make test"}}},{}],6:[function(e,l,h){function g(a,b,c){Array.isArray(a)?"-"==b?a.push(c):a.splice(b,0,c):a[b]=c}function f(a,b){Array.isArray(a)?a.splice(b,1):delete a[b]}Object.defineProperty(h,"__esModule",{value:!0});var k=e("./pointer"),c=e("./equal"),a=e("./errors");h.operationFunctions={add:function(d,b){var c=k.Pointer.fromJSON(b.path).evaluate(d);if(void 0===c.parent)return new a.MissingError(b.path);g(c.parent,
c.key,b.value);return null},remove:function(d,b){var c=k.Pointer.fromJSON(b.path).evaluate(d);if(void 0===c.value)return new a.MissingError(b.path);f(c.parent,c.key);return null},replace:function(d,b){var c=k.Pointer.fromJSON(b.path).evaluate(d);if(void 0===c.value)return new a.MissingError(b.path);c.parent[c.key]=b.value;return null},move:function(d,b){var c=k.Pointer.fromJSON(b.from).evaluate(d);if(void 0===c.value)return new a.MissingError(b.from);var e=k.Pointer.fromJSON(b.path).evaluate(d);if(void 0===
e.parent)return new a.MissingError(b.path);f(c.parent,c.key);g(e.parent,e.key,c.value);return null},copy:function(d,b){var c=k.Pointer.fromJSON(b.from).evaluate(d);if(void 0===c.value)return new a.MissingError(b.from);var e=k.Pointer.fromJSON(b.path).evaluate(d);if(void 0===e.parent)return new a.MissingError(b.path);f(c.parent,c.key);g(e.parent,e.key,c.value);return null},test:function(d,b){var e=k.Pointer.fromJSON(b.path).evaluate(d);return(0,c.compare)(e.value,b.value)?null:new a.TestError(e.value,
b.value)}}},{"./equal":2,"./errors":3,"./pointer":7}],7:[function(e,l,h){function g(c){return c.replace(/~1/g,"/").replace(/~0/g,"~")}function f(c){return c.replace(/~/g,"~0").replace(/\//g,"~1")}Object.defineProperty(h,"__esModule",{value:!0});var k=function(){function c(a,d){for(var b=0;b<d.length;b++){var c=d[b];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(a,d,b){d&&c(a.prototype,d);b&&c(a,b);return a}}();e=function(){function c(a){if(!(this instanceof
c))throw new TypeError("Cannot call a class as a function");this.tokens=a||[""]}k(c,[{key:"toString",value:function(){return this.tokens.map(f).join("/")}},{key:"evaluate",value:function(a){for(var c=null,b=null,e=1,f=this.tokens.length;e<f;e++)c=a,b=this.tokens[e],a=(c||{})[b];return{parent:c,key:b,value:a}}},{key:"push",value:function(a){this.tokens.push(a)}},{key:"add",value:function(a){a=this.tokens.concat(String(a));return new c(a)}}],[{key:"fromJSON",value:function(a){var d=a.split("/").map(g);
if(""!==d[0])throw Error("Invalid JSON Pointer: "+a);return new c(d)}}]);return c}();h.Pointer=e},{}]},{},[4])(4)});
