(function(n){"object"===typeof exports&&"undefined"!==typeof module?module.exports=n():"function"===typeof define&&define.amd?define([],n):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).rfc6902=n()})(function(){return function d(l,b,g){function h(a,c){if(!b[a]){if(!l[a]){var e="function"==typeof require&&require;if(!c&&e)return e(a,!0);if(k)return k(a,!0);e=Error("Cannot find module '"+a+"'");throw e.code="MODULE_NOT_FOUND",e;}e=b[a]={exports:{}};
l[a][0].call(e.exports,function(m){var e=l[a][1][m];return h(e?e:m)},e,e.exports,d,l,b,g)}return b[a].exports}for(var k="function"==typeof require&&require,f=0;f<g.length;f++)h(g[f]);return h}({1:[function(d,l,b){function g(a,e){var c={},b;for(b in a)c[b]=1;for(var f in e)delete c[f];return Object.keys(c)}function h(a){var e={};a.forEach(function(a){for(var m in a)e[m]=(e[m]||0)+1});a=a.length;for(var c in e)e[c]<a&&delete e[c];return Object.keys(e)}function k(a){return void 0===a?"undefined":null===
a?"null":Array.isArray(a)?"array":typeof a}function f(a,c,b){function f(b,d){var g=k[b+","+d];if(void 0===g){if(e(a[b-1],c[d-1]))g=f(b-1,d-1);else{g=[];if(0<b){var h=f(b-1,d);g.push({operations:h.operations.concat({op:"remove",index:b-1}),cost:h.cost+1})}0<d&&(h=f(b,d-1),g.push({operations:h.operations.concat({op:"add",index:b-1,value:c[d-1]}),cost:h.cost+1}));0<b&&0<d&&(h=f(b-1,d-1),g.push({operations:h.operations.concat({op:"replace",index:b-1,value:c[d-1]}),cost:h.cost+1}));g=g.sort(function(a,
e){return a.cost-e.cost})[0]}k[b+","+d]=g}return g}var k={"0,0":{operations:[],cost:0}},d=0;return f(a.length,c.length).operations.map(function(e){if("add"===e.op){var c=e.index+1+d;e={op:e.op,path:b.add(c<a.length?String(c):"-").toString(),value:e.value};d++;return e}return"remove"===e.op?(e={op:e.op,path:b.add(String(e.index+d)).toString()},d--,e):{op:e.op,path:b.add(String(e.index+d)).toString(),value:e.value}})}function a(a,e,b){var d=[];g(a,e).forEach(function(a){d.push({op:"remove",path:b.add(a).toString()})});
g(e,a).forEach(function(a){d.push({op:"add",path:b.add(a).toString(),value:e[a]})});h([a,e]).forEach(function(f){f=c(a[f],e[f],b.add(f));Array.prototype.push.apply(d,f)});return d}function c(c,b,d){var g=k(c),h=k(b);if("array"==g&&"array"==h)return f(c,b,d);if("object"==g&&"object"==h)return a(c,b,d);g=[];e(c,b)||g.push({op:"replace",path:d.toString(),value:b});return g}b.diffAny=c;Object.defineProperty(b,"__esModule",{value:!0});var e=d("./equal").compare},{"./equal":2}],2:[function(d,l,b){function g(a,
c){for(var e=[],m=0,b=a.length;m<b;m++)e.push([a[m],c[m]]);return e}function h(a,c){return a.length!==c.length?!1:g(a,c).every(function(a){return f(a[0],a[1])})}function k(a,c){var e=Object.keys(a),b=Object.keys(c);return h(e,b)?e.every(function(e){return f(a[e],c[e])}):!1}function f(a,c){return a===c?!0:Array.isArray(a)&&Array.isArray(c)?h(a,c):Object(a)===a&&Object(c)===c?k(a,c):!1}b.compare=f;Object.defineProperty(b,"__esModule",{value:!0})},{}],3:[function(d,l,b){var g=function a(c,e,b){var d=
Object.getOwnPropertyDescriptor(c,e);if(void 0===d)return c=Object.getPrototypeOf(c),null===c?void 0:a(c,e,b);if("value"in d&&d.writable)return d.value;e=d.get;return void 0===e?void 0:e.call(b)},h=function(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(a.__proto__=c)},k=function(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function");
};Object.defineProperty(b,"__esModule",{value:!0});b.MissingError=function(a){function c(a){k(this,c);g(Object.getPrototypeOf(c.prototype),"constructor",this).call(this,"Value required at path: "+a);this.name=this.constructor.name;this.path=a}h(c,a);return c}(Error);b.InvalidOperationError=function(a){function c(a){k(this,c);g(Object.getPrototypeOf(c.prototype),"constructor",this).call(this,"Invalid operation: "+a);this.name=this.constructor.name;this.op=a}h(c,a);return c}(Error);b.TestError=function(a){function c(a,
b){k(this,c);g(Object.getPrototypeOf(c.prototype),"constructor",this).call(this,"Test failed: "+a+" != "+b);this.name=this.constructor.name;this.actual=a;this.expected=b}h(c,a);return c}(Error)},{}],4:[function(d,l,b){b.applyPatch=function(a,c){return c.map(function(e){var c=k[e.op];return void 0===c?new g(e.op):c(a,e)})};b.createPatch=function(a,c){var e=new h,e=f(a,c,e);e.forEach(function(a){a.path=a.path.toString()});return e};Object.defineProperty(b,"__esModule",{value:!0});var g=d("./errors").InvalidOperationError,
h=d("./pointer").Pointer,k=function(a){return a&&a.__esModule?a:{"default":a}}(d("./patch")),f=d("./diff").diffAny;d=function(a){return a&&a.__esModule?a["default"]:a}(d("./package")).version;b.version=d},{"./diff":1,"./errors":3,"./package":5,"./patch":6,"./pointer":7}],5:[function(d,l,b){l.exports={name:"rfc6902",version:"1.0.9",description:"Complete implementation of RFC6902 (patch and diff)",keywords:["json","patch","diff","rfc6902"],homepage:"https://github.com/chbrown/rfc6902",repository:{type:"git",
url:"https://github.com/chbrown/rfc6902.git"},author:"Christopher Brown <io@henrian.com> (http://henrian.com)",license:"MIT",main:"./rfc6902.js",devDependencies:{"babel-core":"5.8.34",babelify:"5.0.5",browserify:"12.0.1",derequire:"2.0.3","js-yaml":"*",mocha:"*",typescript:"*"},scripts:{test:"make test"}}},{}],6:[function(d,l,b){function g(a,c,b){Array.isArray(a)?"-"==c?a.push(b):a.splice(c,0,b):a[c]=b}function h(a,c){Array.isArray(a)?a.splice(c,1):delete a[c]}b.add=function(c,b){var d=k.fromJSON(b.path).evaluate(c);
if(void 0===d.parent)return new a(b.path);g(d.parent,d.key,b.value);return null};b.remove=function(c,b){var d=k.fromJSON(b.path).evaluate(c);if(void 0===d.value)return new a(b.path);h(d.parent,d.key);return null};b.replace=function(c,b){var d=k.fromJSON(b.path).evaluate(c);if(void 0===d.value)return new a(b.path);d.parent[d.key]=b.value;return null};b.move=function(c,b){var d=k.fromJSON(b.from).evaluate(c);if(void 0===d.value)return new a(b.from);var f=k.fromJSON(b.path).evaluate(c);if(void 0===f.parent)return new a(b.path);
h(d.parent,d.key);g(f.parent,f.key,d.value);return null};b.copy=function(c,b){var d=k.fromJSON(b.from).evaluate(c);if(void 0===d.value)return new a(b.from);var f=k.fromJSON(b.path).evaluate(c);if(void 0===f.parent)return new a(b.path);h(d.parent,d.key);g(f.parent,f.key,d.value);return null};b.test=function(a,b){var d=k.fromJSON(b.path).evaluate(a);return f(d.value,b.value)?null:new c(d.value,b.value)};Object.defineProperty(b,"__esModule",{value:!0});var k=d("./pointer").Pointer,f=d("./equal").compare;
d=d("./errors");var a=d.MissingError,c=d.TestError},{"./equal":2,"./errors":3,"./pointer":7}],7:[function(d,l,b){function g(b){return b.replace(/~1/g,"/").replace(/~0/g,"~")}function h(b){return b.replace(/~/g,"~0").replace(/\//g,"~1")}var k=function(){function b(a,c){for(var d in c){var f=c[d];f.configurable=!0;f.value&&(f.writable=!0)}Object.defineProperties(a,c)}return function(a,c,d){c&&b(a.prototype,c);d&&b(a,d);return a}}();Object.defineProperty(b,"__esModule",{value:!0});b.Pointer=function(){function b(a){a=
void 0===a?[""]:a;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.tokens=a}k(b,{toString:{value:function(){return this.tokens.map(h).join("/")}},evaluate:{value:function(a){for(var b=null,d=null,f=1,g=this.tokens.length;f<g;f++)b=a,d=this.tokens[f],a=(b||{})[d];return{parent:b,key:d,value:a}}},push:{value:function(a){this.tokens.push(a)}},add:{value:function(a){a=this.tokens.concat(String(a));return new b(a)}}},{fromJSON:{value:function(a){var c=a.split("/").map(g);
if(""!==c[0])throw Error("Invalid JSON Pointer: "+a);return new b(c)}}});return b}()},{}]},{},[4])(4)});
